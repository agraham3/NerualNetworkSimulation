#include "ObjectManager.h"#include "Functions.h"#include <string>#include <cmath>ObjectManager * ObjectManager::p = NULL;void handleCollisions(Object* a, Object* b) {  // collect the id of object  std::string aid, bid;  aid = a->id(); bid = b->id();  // find the shooter: give rewards  Object* shooter = NULL;  if (aid == "robot" && bid == "bullet")    shooter = b->whoShotMe();  else if (aid == "bullet" && bid == "robot")    shooter = a->whoShotMe();  if (shooter) {    shooter->score() += 1;    shooter->energy() += 100;  }  ObjectManager * manager = ObjectManager::getInstance();  manager->remove(a);  manager->remove(b);}void collides(Object* a, Object* b) {  std::string aid, bid;  aid = a->id(); bid = b->id();  // make sure the robot does not kill him self with his own bullet  if (aid == "robot" && bid == "bullet")    if (b->whoShotMe() == a)      return;  else if (bid == "robot" && aid == "bullet")    if (a->whoShotMe() == b)      return;  bool remove = circleCollisionCheck(a, b);  // remove if collided  if (remove) {    handleCollisions(a, b);  } }void ObjectManager::collision() {  if (list.size() < 2)     return;  for (int i = 0; i < list.size(); ++i){    for (int j = i + 1; j < list.size(); ++j){      collides(list[i], list[j]);    }  }}void ObjectManager::insert(Object* o) {  list.push_back(o);}void ObjectManager::remove(Object* o) {  list.erase(std::remove(list.begin(), list.end(), o), list.end());  delete o;}void ObjectManager::clear() {  for (int i = 0; i < list.size(); ++i) {    delete list[i];  }  list.clear();}bool ObjectManager::execute() {  if (list.size() == 0)    return false;  for(int i = 0; i < list.size(); ++i) {    bool alive = list[i]->execute();    if (!alive) {      ObjectManager * manager = ObjectManager::getInstance();      manager->remove(list[i]);    }  }      collision();  return true;}void ObjectManager::draw() {  if (list.size() == 0)    return;  for (int i = 0; i < list.size(); ++i) {    list[i]->draw();  }}